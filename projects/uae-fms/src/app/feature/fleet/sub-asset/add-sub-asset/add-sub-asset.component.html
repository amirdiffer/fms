<form [formGroup]="subAssetForm">
  <div class="button-container">
    <button class="btn-primary-medium btn-scondary-green" routerLink="..">{{'forms.cancel' | translate}}</button>
    <button class="btn-primary-medium add" type="submit" (click)="submit()">{{'forms.add' | translate }}</button>
  </div>

  <div class="form-section">
    <h3 class="form-section__title">{{'sub_asset.sub_asset_specification' | translate}}</h3>

    <div class="row form-section__row">
      <div class="col-12 col-md-4 p-field form-section__field options-select">
        <span class="p-float-label">
          <p-dropdown inputId="subAssetType" [autoDisplayFirst]="false"
            [options]="subAssetTypes"
            formControlName="subAssetType" optionLabel="name"></p-dropdown>
          <label for="subAssetType">{{'sub_asset.sub_asset_type' | translate}} * </label>
          <anms-error
            [showError]="hasError('subAssetType',subAssetForm,submited)"
            error="forms.feedback.required"></anms-error>
        </span>
      </div>
    </div>
    <div class="row form-section__row">
      <div class="col-12 col-md-3 p-field form-section__field options-select">
        <span class="p-float-label">
          <p-dropdown inputId="make" [autoDisplayFirst]="false"
            [options]="makes"
            formControlName="make" optionLabel="name"></p-dropdown>
          <label for="make">{{'sub_asset.make' | translate}} * </label>
          <anms-error
            [showError]="hasError('make',subAssetForm,submited)"
            error="forms.feedback.required"></anms-error>
        </span>
      </div>
      <div class="col-12 col-md-3 p-field form-section__field options-select">
        <span class="p-float-label">
          <p-dropdown inputId="model" [autoDisplayFirst]="false"
            [options]="models"
            formControlName="model" optionLabel="name"></p-dropdown>
          <label for="model">{{'sub_asset.model' | translate}} * </label>
          <anms-error
            [showError]="hasError('model',subAssetForm,submited)"
            error="forms.feedback.required"></anms-error>
        </span>
      </div>
      <div class="col-12 col-md-3 p-field form-section__field options-select">
        <span class="p-float-label">
          <p-dropdown inputId="year" [autoDisplayFirst]="false"
            [options]="years"
            formControlName="year" optionLabel="name"></p-dropdown>
          <label for="year">{{'sub_asset.year' | translate}} * </label>
          <anms-error
            [showError]="hasError('year',subAssetForm,submited)"
            error="forms.feedback.required"></anms-error>
        </span>
      </div>
      <div class="col-12 col-md-3 p-field form-section__field options-select">
        <span class="p-float-label">
          <p-dropdown inputId="origin" [autoDisplayFirst]="false"
            [options]="origins"
            formControlName="origin" optionLabel="name"></p-dropdown>
          <label for="origin">{{'sub_asset.origin' | translate}} * </label>
          <anms-error
            [showError]="hasError('origin',subAssetForm,submited)"
            error="forms.feedback.required"></anms-error>
        </span>
      </div>
    </div>


  </div>
  <div class="form-section">
    <h3 class="form-section__title">{{'sub_asset.financial' | translate}}</h3>
    <div class="row form-section__row">
      <div class="col-12 col-md-5 p-field form-section__field options-select">
        <span class="p-float-label">
          <p-dropdown inputId="policyType" [autoDisplayFirst]="false"
            [options]="policyTypes"
            formControlName="policyType" optionLabel="name"></p-dropdown>
          <label for="policyType">{{'sub_asset.policy_type' | translate}} * </label>
          <anms-error
            [showError]="hasError('policyType',subAssetForm,submited)"
            error="forms.feedback.required"></anms-error>
        </span>
      </div>

      <div class="col-12 col-md-5 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="purchaseValue" pInputText
            placeholder="{{'sub_asset.purchase_value' | translate}}*"  type="text">
          <label>{{'sub_asset.purchase_value' | translate}}*</label>
          <anms-error
            [showError]="hasError('purchaseValue',subAssetForm,submited)"
            error="forms.feedback.required">
          </anms-error>
        </span>
      </div>
    </div>
  </div>
  <div class="form-section" formArrayName = "warranties">
    <h3 class="form-section__title"><span class='plus-icon' (click)="addWarranty()">
      <svg-icon src='../../../../../assets/icons/add.svg'
        [svgStyle]="{ 'width.px':24 , 'fill': '#0DA06E' , 'height':
        '100%'}"></svg-icon>
    </span>{{'sub_asset.warranty_items' | translate}}</h3>
    <div class="row form-section__row" [formGroupName]="i" *ngFor="let item of subAssetForm.get('warranties')['controls']; let i = index;">
      <div class="col-12 col-md-3 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="item" pInputText
            placeholder="Item"  type="text">
          <label>{{'sub_asset.item' | translate}}</label>
        </span>
      </div>
      <div class="col-12 col-md-3 p-field form-section__field
        dropdown-select-input">
        <p-dropdown inputId="unit" [options]="units" formControlName="year"
          optionLabel="name"></p-dropdown>
          <span class="p-float-label">
            <input formControlName="duration" pInputText
              placeholder="{{'sub_asset.duration' | translate}}"  type="text">
            <label>{{'sub_asset.duration' | translate}}</label>
          </span>
      </div>
      <div class="col-12 col-md-3 p-field form-section__field date-input">
        <span class="p-float-label">
            <p-calendar inputId="basic" formControlName="startDate"></p-calendar>
            <svg-icon class="date-icon"
            src='../../../../../assets/icons/calendar-alt-regular.svg'
            [svgStyle]="{ 'width.px':20 , 'fill': 'rgb(161 161 161)' ,
            'height': '100%'}"></svg-icon>
            <label>{{'sub_asset.warranty_start_date' | translate}} * </label>
            <!-- <anms-error
            [showError]="hasError('startDate',subAssetForm.get('warranties')[i],submited)"
            error="forms.feedback.required">
          </anms-error> -->
        </span>
    </div>
    <div class="col-12 col-md-3 p-field form-section__field">
      <div class='upload-box'>
        <label class='space-drop' for='attach_picture_sub-asset'>
          <div>{{'sub_asset.upload_form.content' | translate}}</div>
        </label>
        <input type='file' hidden id='attach_picture_sub-asset'>
      </div>
    </div>
    </div>
  </div>

  <div class="form-section">
    <div class="row form-section__row">
      <div class="col-12 col-md-12 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="description" pInputText
            placeholder="{{'sub_asset.description' | translate}}"  type="text">
          <label>{{'sub_asset.description' | translate}}</label>
        </span>
      </div>
    </div>



  </div>

  

</form>