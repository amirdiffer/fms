<form [formGroup]="addCategoryForm">
  <div class="button-container">
    <button class="btn-primary-medium btn-scondary-green" type="button" (click)="cancel()">{{ 'forms.cancel' | translate }}</button>
    <button class="btn-primary-medium add" (click)="submit()">{{ (isEditing ? 'forms.edit' : 'forms.add') | translate }}</button>
  </div>
  <div class="form-section mx-0">
    <h3 class="form-section__title">{{ 'configuration.business_category.business_category_info' | translate }}</h3>

    <div class="row form-section__row">
      <div class="col-12 col-md-4 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="name" pInputText
            placeholder="{{ 'configuration.business_category.business_category_name' | translate }}*" required type="text">
          <label>{{ 'configuration.business_category.business_category_name' | translate }}*</label>
        </span>
        <anms-error
          [showError]="hasError('name',addCategoryForm,submited)"
          error="forms.feedback.required"></anms-error>
      </div>
      <div class="col-12 col-md-4 p-field form-section__field">
        <div class="autocomplete-select">
          <span class="p-float-label">
            <p-autoComplete formControlName="assetType"
              (completeMethod)="filterAssets($event)"
              [suggestions]="assetTypes" field="name"
              [minLength]="1"></p-autoComplete>
            <i class="pi pi-search"></i>
            <label>{{ 'configuration.business_category.asset_type' | translate }} *</label>
          </span>
          <anms-error
            [showError]="hasError('assetType',addCategoryForm,submited)"
            error="forms.feedback.required">
          </anms-error>
        </div>
      </div>
      <div class="col-2 form-section__field toggle-select">
        <p-inputSwitch formControlName="activeCategory"></p-inputSwitch>
        <span class='mb-1'>{{ 'configuration.business_category.active_category' | translate }}</span>
      </div>
    </div>
    <div class="row form-section__row">
      <div class="col-12 col-md-12 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="description" pInputText
            placeholder="{{ 'configuration.business_category.description' | translate }}" type="text">
          <label>{{ 'configuration.business_category.description' | translate }}</label>
        </span>
      </div>
    </div>


  </div>
  <div class="form-section mx-0">
    <h3 class="form-section__title">
      <span class='plus-icon' (click)="addAssignSubAsset()">
        <svg-icon src='assets/icons/add.svg'
          [svgStyle]="{ 'width.px':18 , 'fill': '#0DA06E' , 'height': '100%'}"></svg-icon>
      </span>
      {{ 'configuration.business_category.assign_sub_asset' | translate }}
    </h3>

    <div formArrayName="assignSubAsset">
      <div class="row form-section__row" *ngFor="let _ of assignSubAsset.controls; let index = index" [formGroupName]="index">
        <div class="col-12 col-md-6 p-field form-section__field">
          <div class="autocomplete-select">
          <span class="p-float-label">
            <p-autoComplete formControlName="subAsset"
              (completeMethod)="filterSubAssets($event)"
              [suggestions]="subAssets" field="name"
              [minLength]="1"></p-autoComplete>
            <i class="pi pi-search"></i>
            <label>{{ 'configuration.business_category.sub_asset' | translate }} *</label>
          </span>
            <anms-error
              [showError]="formArrayHasError(submited, assignSubAsset, index, 'subAsset')"
              error="forms.feedback.required">
            </anms-error>
          </div>
        </div>
        <div class='col-lg-3'>
          <anms-uploader [isSmall]='true' [dropzoneLabel]="'configuration.business_category.upload_form.content'"
                         [iconIsHidden]='true' [multiple]="false" [preview]="false"
                         (uploadedEvent)="uploadSubAssetFile($event, index)" [files]="[subAssetDocs[index]]">
          </anms-uploader>
        </div>
        <div class="col-12 col-md-3 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="assetQuantity" pInputText
                 placeholder="{{ 'configuration.business_category.quantity' | translate }}" type="number">
          <!--          <label>{{ 'configuration.business_category.quantity' | translate }}</label>-->
        </span>
      </div>
    </div>
  </div>
    <h3 class="form-section__title"><span class='plus-icon' (click)="addAssignAccessory()">
        <svg-icon src='assets/icons/add.svg'
          [svgStyle]="{ 'width.px':18 , 'fill': '#0DA06E' , 'height': '100%'}"></svg-icon>
      </span>
      {{ 'configuration.business_category.assign_accessory' | translate }}
    </h3>

    <div formArrayName="assignAccessory">
      <div class="row form-section__row" *ngFor="let _ of assignAccessory.controls; let index = index" [formGroupName]="index">
      <div class="col-12 col-md-6 p-field form-section__field">
        <div class="autocomplete-select">
          <span class="p-float-label">
            <p-autoComplete formControlName="accessory"
              (completeMethod)="filterAccessories($event)"
              [suggestions]="accessories" field="name"
              [minLength]="1"></p-autoComplete>
            <i class="pi pi-search"></i>
            <label>{{ 'configuration.business_category.accessory' | translate }} *</label>
          </span>
          <anms-error
            [showError]="formArrayHasError(submited, assignAccessory, index, 'accessory')"
            error="forms.feedback.required">
          </anms-error>
        </div>
      </div>
      <div class='col-lg-3'>
        <anms-uploader [isSmall]='true' dropzoneLabel='configuration.business_category.upload_form.content'
                       [iconIsHidden]='true' [multiple]="false" [preview]="false"
                       (uploadedEvent)="uploadAccessoryFile(index, $event)" [files]="[accessoryDocs[index]]">
        </anms-uploader>
      </div>
      <div class="col-12 col-md-3 p-field form-section__field">
        <span class="p-float-label">
          <input formControlName="accessoryQuantity" pInputText
            placeholder="{{ 'configuration.business_category.quantity' | translate }}" type="number">
        </span>
      </div>
    </div>
    </div>
  </div>
</form>
<div class='table-container component_wrapper' *ngIf="false">
  <app-table [setting]='addCategory_Table' [tableData]="businessCategory$"></app-table>
</div>
<alert-dialog [settings]="dialogSetting" [displayModal]="dialogModal" (confirm)="dialogConfirm($event)"></alert-dialog>
