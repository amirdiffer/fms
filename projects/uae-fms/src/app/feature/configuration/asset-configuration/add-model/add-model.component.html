<div class='row'>
  <div class='col-12'>
    <form [formGroup]='inputForm'>
      <div class='button-container'>
        <button class='btn-primary-medium btn-scondary-green'
                (click)='cancel()'>{{ 'forms.cancel' | translate }}</button>
        <button class='btn-primary-medium add' (click)='submit()'>{{ isEditing ? ('forms.edit' | translate) : ('forms.add' | translate) }}</button>
      </div>
      <div class='row form-section'>
        <div class='col-12 mt-2 px-0'>
          <h3 class='form-section__title'>{{ (isEditing ? ('filter.edit_model_for' | translate) : ('filter.add_model_for' | translate)) + ' ' + selectedCategory }}</h3>
          <div formArrayName='models'>
            <div class='mt-3 h-100' *ngFor='let model of models.controls; let index = index' [formGroupName]='index'>
              <div class='row form-section__row mx-0'>
              <span class='remove-icon mt-1' (click)="removeModel(index)" *ngIf='models.controls.length != index + 1'>
                <svg-icon src='assets/icons/add.svg'
                          [svgStyle]="{ 'width.px':18 , 'fill': '#F75A4A' , 'height': '100%', 'transform': 'rotate(45deg)'}"></svg-icon>
              </span>
                <span class='plus-icon mt-1' (click)="addModel();submited = true;" *ngIf='models.controls.length == index + 1 && !isEditing'>
                <svg-icon src='assets/icons/add.svg'
                          [svgStyle]="{ 'width.px':18 , 'fill': '#0DA06E' , 'height': '100%'}"></svg-icon>
              </span>
                <div class='col-12 col-md-3 p-field form-section__field'>
                  <div class='autocomplete-select'>
                  <span class='p-float-label'>
                    <input formControlName='model' pInputText
                           placeholder="{{ 'filter.model_name' | translate }} *" type='text'>
                    <label>{{ 'filter.model_name' | translate }} *</label>
                  </span>
                    <anms-error [showError]="formArrayHasError(submited, models, index, 'model')"
                                error='forms.feedback.required'></anms-error>
                  </div>
                </div>
                <div class='col-12 col-md-6 p-field form-section__field'>
                  <div class='autocomplete-select'>
                  <span class='p-float-label'>
                    <input formControlName='modelDescription' pInputText
                           placeholder="{{ 'filter.description' | translate }} *" type='text'>
                    <label>{{ 'filter.description' | translate }} *</label>
                  </span>
                    <anms-error [showError]="formArrayHasError(submited, models, index, 'modelDescription')"
                                error='forms.feedback.required'></anms-error>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
<alert-dialog [settings]='dialogSetting' [displayModal]='dialogModal' (confirm)='dialogConfirm($event)'></alert-dialog>
